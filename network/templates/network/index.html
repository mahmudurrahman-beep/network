<!--
================================================================================
ARGON NETWORK - HOME FEED TEMPLATE
================================================================================

@file        index.html
@description Main feed page showing posts from all users or followed users
@version     2.0.0
@author      Argon admin 
@date        February 2026
@copyright   Copyright (c) 2026 Argon Network

TEMPLATE PURPOSE
================================================================================
This template displays the main social feed with:
- New post creation form (authenticated users only)
- Feed toggle (All Posts / Following)
- Paginated post list
- Post cards with voting, comments, actions
- Responsive grid layout
- Real-time interactions (voting, commenting)

TEMPLATE INHERITANCE
================================================================================
Extends: network/layout.html
Block: {% block body %}

CONTEXT VARIABLES REQUIRED
================================================================================
- request.user: Current authenticated user
- request.user.is_authenticated: Boolean authentication state
- page_obj: Django paginator page object
- posts: QuerySet of Post objects (paginated)
- is_following_feed: Boolean indicating feed type
- MEDIA_URL: Django media files URL

FEATURES
================================================================================
- Create new posts (text + optional media)
- View all posts or followed users' posts only
- Vote on posts (thumbs up/down)
- Comment on posts
- Edit/delete own posts
- Pagination controls
- Author profile links
- Timestamp display

DEPENDENCIES
================================================================================
- Bootstrap 4 grid system
- Django pagination
- Custom template tags (if any)
- main.js (post interactions)

BROWSER SUPPORT
================================================================================
- Chrome 60+, Firefox 55+, Safari 12+, Edge 79+
- Responsive: Mobile-first design

ACCESSIBILITY
================================================================================
- Semantic post structure
- ARIA labels for interactive elements
- Keyboard navigation
- Screen reader friendly(Good UX)

================================================================================
-->

<!-- 
    ========================================================================
    SECTION 1: NEW POST CREATION FORM
    ========================================================================
    
    Form for authenticated users to create new posts with:
    - Text content (required)
    - Optional media upload
    - Submit button
    - CSRF protection
    ========================================================================
-->

{% extends "network/layout.html" %}
{% load static %}


<!-- 
    ========================================================================
    END OF HOME FEED TEMPLATE
    ========================================================================
    
    Main feed functionality complete.
    JavaScript in main.js handles post interactions.
    
    Maintainer: Argon admin 
    Last updated: February 2026
    ========================================================================
-->

{% block title %}Home{% endblock %}

{% block body %}
<div class="container my-4">
  <div class="text-center mb-5">
    <h1 class="display-4 text-primary fw-bold mb-3">Welcome to Argon Network</h1>
    <p class="lead text-muted mb-4">Connect, create, and belong — a friendly, ad‑free social space built with privacy in mind.</p>
    
    {% if not user.is_authenticated %}
    <div class="mb-5">
      <a href="{% url 'register' %}" class="btn btn-primary btn-lg px-4 py-3 me-3 fw-bold rounded-pill shadow">
        <i class="fas fa-user-plus me-2"></i> Join Now
      </a>
      <a href="{% url 'login' %}" class="btn btn-outline-primary btn-lg px-4 py-3 fw-bold rounded-pill">
        <i class="fas fa-sign-in-alt me-2"></i> Log In
      </a>
    </div>
    {% endif %}
  </div>

  {% if user.is_authenticated %}
  <div class="row">
    <div class="col-lg-8 mx-auto">
      <div class="card shadow-sm border-0 rounded-3 mb-4">
        <div class="card-body p-4">
          <h3 class="card-title text-primary mb-3">
            <i class="fas fa-user-circle me-2"></i> Welcome back, {{ user.username }}!
          </h3>
          <p class="card-text">Here's what you can do on Argon Network:</p>
          
          <div class="row mt-4">
            <div class="col-md-6 mb-3">
              <div class="d-flex align-items-start p-3 bg-light rounded-3 h-100">
                <div class="me-3">
                  <i class="fas fa-edit fa-2x text-primary"></i>
                </div>
                <div>
                  <h5 class="fw-bold mb-2">Create Posts</h5>
                  <p class="text-muted mb-0">Share your thoughts, ideas, and moments with the community.</p>
                  <a href="{% url 'new_post' %}" class="btn btn-sm btn-primary mt-2">New Post</a>
                </div>
              </div>
            </div>
            
            <div class="col-md-6 mb-3">
              <div class="d-flex align-items-start p-3 bg-light rounded-3 h-100">
                <div class="me-3">
                  <i class="fas fa-users fa-2x text-primary"></i>
                </div>
                <div>
                  <h5 class="fw-bold mb-2">Discover People</h5>
                  <p class="text-muted mb-0">Find and connect with interesting people on the network.</p>
                  <a href="{% url 'discover_users' %}" class="btn btn-sm btn-primary mt-2">Discover</a>
                </div>
              </div>
            </div>
          </div>
          
          <div class="row mt-2">
            <div class="col-md-6 mb-3">
              <div class="d-flex align-items-start p-3 bg-light rounded-3 h-100">
                <div class="me-3">
                  <i class="fas fa-newspaper fa-2x text-primary"></i>
                </div>
                <div>
                  <h5 class="fw-bold mb-2">All Posts</h5>
                  <p class="text-muted mb-0">See what everyone is talking about on the network.</p>
                  <a href="{% url 'all_posts' %}" class="btn btn-sm btn-primary mt-2">View All</a>
                </div>
              </div>
            </div>
            
            <div class="col-md-6 mb-3">
              <div class="d-flex align-items-start p-3 bg-light rounded-3 h-100">
                <div class="me-3">
                  <i class="fas fa-bell fa-2x text-primary"></i>
                </div>
                <div>
                  <h5 class="fw-bold mb-2">Notifications</h5>
                  <p class="text-muted mb-0">Stay updated with mentions, likes, and new followers.</p>
                  <a href="{% url 'notifications' %}" class="btn btn-sm btn-primary mt-2">View</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Quick Stats Card -->
      <div class="card shadow-sm border-0 rounded-3">
        <div class="card-body p-4">
          <h4 class="card-title text-primary mb-3">
            <i class="fas fa-chart-line me-2"></i> Quick Links
          </h4>
          <div class="d-flex flex-wrap gap-2">
            <a href="{% url 'following' %}" class="btn btn-outline-primary">
              <i class="fas fa-user-friends me-1"></i> Following
            </a>
            <a href="{% url 'messages_inbox' %}" class="btn btn-outline-primary">
              <i class="fas fa-envelope me-1"></i> Messages
            </a>
            <a href="{% url 'profile' user.username %}" class="btn btn-outline-primary">
              <i class="fas fa-id-card me-1"></i> Your Profile
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  {% else %}
  <!-- Features for non-logged in users -->
  <div class="row mt-5">
    <div class="col-md-4 mb-4">
      <div class="card shadow-sm border-0 rounded-3 h-100">
        <div class="card-body text-center p-4">
          <div class="mb-3">
            <i class="fas fa-comments fa-3x text-primary"></i>
          </div>
          <h4 class="card-title">Connect & Chat</h4>
          <p class="card-text text-muted">Real-time messaging with threads and reactions for richer conversations.</p>
        </div>
      </div>
    </div>
    
    <div class="col-md-4 mb-4">
      <div class="card shadow-sm border-0 rounded-3 h-100">
        <div class="card-body text-center p-4">
          <div class="mb-3">
            <i class="fas fa-palette fa-3x text-primary"></i>
          </div>
          <h4 class="card-title">Unleash Creativity</h4>
          <p class="card-text text-muted">Tools and spaces for artists, creators, and makers to share work and collaborate.</p>
        </div>
      </div>
    </div>
    
    <div class="col-md-4 mb-4">
      <div class="card shadow-sm border-0 rounded-3 h-100">
        <div class="card-body text-center p-4">
          <div class="mb-3">
            <i class="fas fa-lock fa-3x text-primary"></i>
          </div>
          <h4 class="card-title">Privacy First</h4>
          <p class="card-text text-muted">Your data belongs to you. Granular controls and thoughtful defaults to protect your experience.</p>
        </div>
      </div>
    </div>
  </div>
  
  <div class="text-center mt-5">
    <div class="card shadow-sm border-0 rounded-3 bg-light">
      <div class="card-body p-5">
        <h3 class="card-title text-primary mb-3">Ready to get started?</h3>
        <p class="card-text text-muted mb-4">Join thousands of users who are already connecting on Argon Network.</p>
        <a href="{% url 'register' %}" class="btn btn-primary btn-lg px-5 py-3 fw-bold rounded-pill shadow">
          <i class="fas fa-rocket me-2"></i> Create Your Account
        </a>
        <p class="mt-3 text-muted small">Already have an account? <a href="{% url 'login' %}" class="text-primary fw-bold">Log in here</a></p>
      </div>
    </div>
  </div>
  {% endif %}
</div>

<style>
  .card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    border: 1px solid rgba(8,48,71,0.08) !important;
  }
  .card:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 40px rgba(14, 97, 150, 0.1) !important;
  }
  .btn-primary {
    background: linear-gradient(90deg, var(--brand-blue), var(--brand-teal)) !important;
    border: none !important;
    font-weight: 600 !important;
    border-radius: 10px !important;
  }
  .btn-outline-primary {
    color: var(--brand-blue) !important;
    border-color: var(--brand-blue) !important;
    font-weight: 600 !important;
    border-radius: 10px !important;
  }
  .btn-outline-primary:hover {
    background: rgba(14, 97, 150, 0.08) !important;
  }
</style>

<!-- Auto-redirect for logged-in users to feed -->
{% if user.is_authenticated %}
<script>
  /*
  setTimeout(function() {
    window.location.href = "{% url 'all_posts' %}";
  }, 3000);
  */
</script>
{% endif %}

<!-- 
    ========================================================================
    END OF HOME FEED TEMPLATE
    ========================================================================
    
    Main feed functionality complete.
    JavaScript in main.js handles post interactions.
    
    Maintainer: Argon admin 
    Last updated: February 2026
    ========================================================================
-->

{% endblock %}
